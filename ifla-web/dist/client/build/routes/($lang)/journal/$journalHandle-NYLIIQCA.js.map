{
  "version": 3,
  "sources": ["../../../../../../app/routes/($lang)/journal/$journalHandle.tsx"],
  "sourcesContent": ["import {\n  json,\n  type MetaFunction,\n  type SerializeFrom,\n  type LinksFunction,\n  type LoaderArgs,\n} from '@shopify/remix-oxygen';\nimport {useLoaderData} from '@remix-run/react';\nimport {Image} from '@shopify/hydrogen';\nimport {Blog} from '@shopify/hydrogen/storefront-api-types';\nimport invariant from 'tiny-invariant';\nimport {PageHeader, Section} from '~/components';\nimport {ATTR_LOADING_EAGER} from '~/lib/const';\nimport styles from '../../../styles/custom-font.css';\nimport type {SeoHandleFunction} from '@shopify/hydrogen';\n\nconst BLOG_HANDLE = 'journal';\n\nconst seo: SeoHandleFunction<typeof loader> = ({data}) => ({\n  title: data?.article?.seo?.title,\n  description: data?.article?.seo?.description,\n  titleTemplate: '%s | Journal',\n});\n\nexport const handle = {\n  seo,\n};\n\nexport async function loader({params, context}: LoaderArgs) {\n  const {language, country} = context.storefront.i18n;\n\n  invariant(params.journalHandle, 'Missing journal handle');\n\n  const {blog} = await context.storefront.query<{\n    blog: Blog;\n  }>(ARTICLE_QUERY, {\n    variables: {\n      blogHandle: BLOG_HANDLE,\n      articleHandle: params.journalHandle,\n      language,\n    },\n  });\n\n  if (!blog?.articleByHandle) {\n    throw new Response(null, {status: 404});\n  }\n\n  const article = blog.articleByHandle;\n\n  const formattedDate = new Intl.DateTimeFormat(`${language}-${country}`, {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n  }).format(new Date(article?.publishedAt!));\n\n  return json(\n    {article, formattedDate},\n    {\n      headers: {\n        // TODO cacheLong()\n      },\n    },\n  );\n}\n\nexport const meta: MetaFunction = ({\n  data,\n}: {\n  data: SerializeFrom<typeof loader> | undefined;\n}) => {\n  return {\n    title: data?.article?.seo?.title ?? 'Article',\n    description: data?.article?.seo?.description,\n  };\n};\n\nexport const links: LinksFunction = () => {\n  return [{rel: 'stylesheet', href: styles}];\n};\n\nexport default function Article() {\n  const {article, formattedDate} = useLoaderData<typeof loader>();\n\n  const {title, image, contentHtml, author} = article;\n\n  return (\n    <>\n      <PageHeader heading={title} variant=\"blogPost\">\n        <span>\n          {formattedDate} &middot; {author.name}\n        </span>\n      </PageHeader>\n      <Section as=\"article\" padding=\"x\">\n        {image && (\n          <Image\n            data={image}\n            className=\"w-full mx-auto mt-8 md:mt-16 max-w-7xl\"\n            sizes=\"90vw\"\n            widths={[400, 800, 1200]}\n            width=\"100px\"\n            loading={ATTR_LOADING_EAGER}\n            loaderOptions={{\n              scale: 2,\n              crop: 'center',\n            }}\n          />\n        )}\n        <div\n          dangerouslySetInnerHTML={{__html: contentHtml}}\n          className=\"article\"\n        />\n      </Section>\n    </>\n  );\n}\n\nconst ARTICLE_QUERY = `#graphql\n  query ArticleDetails(\n    $language: LanguageCode\n    $blogHandle: String!\n    $articleHandle: String!\n  ) @inContext(language: $language) {\n    blog(handle: $blogHandle) {\n      articleByHandle(handle: $articleHandle) {\n        title\n        contentHtml\n        publishedAt\n        author: authorV2 {\n          name\n        }\n        image {\n          id\n          altText\n          url\n          width\n          height\n        }\n        seo {\n          description\n          title\n        }\n      }\n    }\n  }\n`;\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;AAsFI;AApEJ,IAAM,MAAwC,CAAC,EAAC,KAAI,OAAO;AAAA,EACzD,OAAO,MAAM,SAAS,KAAK;AAAA,EAC3B,aAAa,MAAM,SAAS,KAAK;AAAA,EACjC,eAAe;AACjB;AAEO,IAAM,SAAS;AAAA,EACpB;AACF;AAuCO,IAAM,OAAqB,CAAC;AAAA,EACjC;AACF,MAEM;AACJ,SAAO;AAAA,IACL,OAAO,MAAM,SAAS,KAAK,SAAS;AAAA,IACpC,aAAa,MAAM,SAAS,KAAK;AAAA,EACnC;AACF;AAEO,IAAM,QAAuB,MAAM;AACxC,SAAO,CAAC,EAAC,KAAK,cAAc,MAAM,oBAAM,CAAC;AAC3C;AAEe,SAAR,UAA2B;AAChC,QAAM,EAAC,SAAS,cAAa,IAAI,cAA6B;AAE9D,QAAM,EAAC,OAAO,OAAO,aAAa,OAAM,IAAI;AAE5C,SACE,sFACE;AAAA,uDAAC,cAAW,SAAS,OAAO,SAAQ,YAClC,6DAAC,UACE;AAAA;AAAA,MAAc;AAAA,MAAW,OAAO;AAAA,SADnC;AAAA;AAAA;AAAA;AAAA,WAEA,KAHF;AAAA;AAAA;AAAA;AAAA,WAIA;AAAA,IACA,mDAAC,WAAQ,IAAG,WAAU,SAAQ,KAC3B;AAAA,eACC;AAAA,QAAC;AAAA;AAAA,UACC,MAAM;AAAA,UACN,WAAU;AAAA,UACV,OAAM;AAAA,UACN,QAAQ,CAAC,KAAK,KAAK,IAAI;AAAA,UACvB,OAAM;AAAA,UACN,SAAS;AAAA,UACT,eAAe;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,UACR;AAAA;AAAA,QAVF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAWA;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UACC,yBAAyB,EAAC,QAAQ,YAAW;AAAA,UAC7C,WAAU;AAAA;AAAA,QAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAGA;AAAA,SAlBF;AAAA;AAAA;AAAA;AAAA,WAmBA;AAAA,OAzBF;AAAA;AAAA;AAAA;AAAA,SA0BA;AAEJ;",
  "names": []
}
